__layout:
  - id: srt-listener
    x: 480
    y: 400
  - id: dynamicbug
    x: 848
    y: 144
  - id: fixedladder
    x: 1184
    y: 144
  - id: autocmaf
    x: 1520
    y: 400
__globalConfig: {}
components:
  - type: input.srt-listener
    config:
      displayName: srt-listener
      port: 5001
      ip: 0.0.0.0
      passphrase: ""
      socketOptions: {}
      sourceNames: permissive
      streamIds:
        - camera1
      id: srt-listener
    subscriptions: []
  - type: processor.dynamicBug
    config:
      displayName: dynamicBug
      defaultBug: trinorsk.png
      defaultPosition: topleft
      id: dynamicbug
    subscriptions:
      - source: srt-listener
        streams:
          type: take-specific-stream
          select:
            - video
          filter: camera1
  - type: processor.transform.fixedLadder
    config:
      displayName: fixedLadder
      rungs:
        - name: h264_1280x720
          software:
            width: 1280
            height: 720
            codec:
              type: x264
              bitrateMode:
                value: 2500
                mode: abr
              keyFrameIntervalMax: 50
              keyFrameIntervalMin: 50
              sceneCut: 0
              preset: fast
              tune: zerolatency
              threads: 4
              bframes: 0
            frameRate:
              frames: 25
              seconds: 1
          quadra:
            width: 1280
            height: 720
            codec:
              type: quadra-h264
              intraPeriod: 50
              bitrate: 2500000
            frameRate:
              frames: 25
              seconds: 1
          logan:
            width: 1280
            height: 720
            codec:
              type: logan-h264
              intraPeriod: 50
              bitrate: 2500000
            frameRate:
              frames: 25
              seconds: 1
          nvidia:
            width: 1280
            height: 720
            codec:
              type: nv-h264
              idrPeriod: 50
              rateControl:
                mode: vbr
                averageBitrate: 2500000
            frameRate:
              frames: 25
              seconds: 1
          ma35d:
            width: 1280
            height: 720
            codec:
              type: amdMA35D-h264
              profile: main
              rateControl:
                mode: cbr
                bitrate: 5000
              gopSize: 50
            frameRate:
              frames: 25
              seconds: 1
      id: fixedladder
    subscriptions:
      - source: dynamicbug
        streams:
          type: take-first-stream
          select:
            - video
  - type: output.autoCmaf
    config:
      displayName: autoCmaf
      name: default
      sessionId: true
      segments:
        retentionPeriod: 60
        defaultSegmentCount: 0
        targetSegmentDuration: 4
        targetPartDuration: 1
        s3Destinations: []
        bufferDelayMs: 500
      id: autocmaf
    subscriptions:
      - source: fixedladder
        streams:
          type: take-specific-stream
          select:
            - video
          filter: h264_1280x720
      - source: srt-listener
        streams:
          type: take-specific-streams
          select:
            - audio
          filter: camera1
